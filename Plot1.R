## Set work directory
setwd("./ExData_Plotting1") 
getwd() 
list.files() 
if(!file.exists("data")) { 
        dir.create("data") 
        } 
list.files()

## Getting full dataset
data_full <- read.csv("./Data/household_power_consumption.txt", header=T, sep=';', na.strings="?",  
                      check.names=F, stringsAsFactors=F, comment.char="", quote='\"') 
data_full$Date <- as.Date(data_full$Date, format="%d/%m/%Y") 

str(data_full)
#'data.frame':        2075259 obs. of  9 variables:
#$ Date                 : Date, format: "2006-12-16" "2006-12-16" "2006-12-16" ...
#$ Time                 : chr  "17:24:00" "17:25:00" "17:26:00" "17:27:00" ...
#$ Global_active_power  : num  4.22 5.36 5.37 5.39 3.67 ...
#$ Global_reactive_power: num  0.418 0.436 0.498 0.502 0.528 0.522 0.52 0.52 0.51 0.51 ...
#$ Voltage              : num  235 234 233 234 236 ...
#$ Global_intensity     : num  18.4 23 23 23 15.8 15 15.8 15.8 15.8 15.8 ...
#$ Sub_metering_1       : num  0 0 0 0 0 0 0 0 0 0 ...
#$ Sub_metering_2       : num  1 1 2 1 1 2 1 1 1 2 ...
#$ Sub_metering_3       : num  17 16 17 17 17 17 17 17 17 16 ...

## Subsetting the data 
data <- subset(data_full, subset=(Date >= "2007-02-01" & Date <= "2007-02-02")) 
str(data)
#'data.frame':        2880 obs. of  9 variables:
#$ Date                 : Date, format: "2007-02-01" "2007-02-01" "2007-02-01" ...
#$ Time                 : chr  "00:00:00" "00:01:00" "00:02:00" "00:03:00" ...
#$ Global_active_power  : num  0.326 0.326 0.324 0.324 0.322 0.32 0.32 0.32 0.32 0.236 ...
#$ Global_reactive_power: num  0.128 0.13 0.132 0.134 0.13 0.126 0.126 0.126 0.128 0 ...
#$ Voltage              : num  243 243 244 244 243 ...
#$ Global_intensity     : num  1.4 1.4 1.4 1.4 1.4 1.4 1.4 1.4 1.4 1 ...
#$ Sub_metering_1       : num  0 0 0 0 0 0 0 0 0 0 ...
#$ Sub_metering_2       : num  0 0 0 0 0 0 0 0 0 0 ...
#$ Sub_metering_3       : num  0 0 0 0 0 0 0 0 0 0 ...
rm(data_full) 
 

## Converting dates 
datetime <- paste(as.Date(data$Date), data$Time) 
data$Datetime <- as.POSIXct(datetime) 
 

## Plot 1 
hist(data$Global_active_power, main="Global Active Power",  
     xlab="Global Active Power (kilowatts)", ylab="Frequency", col="Red") 
 

## Saving to file 
dev.copy(png, file="plot1.png", height=480, width=480) 
dev.off() 
